<!DOCTYPE html>
<html lang="en">
<head>
<link href='https://fonts.googleapis.com/css?family=Marmelad' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="style.css" type="text/css"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style"
      content="black" />
<link rel="apple-touch-icon" href="happy.png" />

<script src="https://code.jquery.com/jquery.min.js"></script>

<script src="script.js"></script>
<!-- <script src="../server.js"></script> -->

<title>Happy</title>

</head>

<body>
	<section class="survey">
		<header>
			<H1>&#191;Como Fue Tu Experiencia Hoy?</h1>
		</header>
			<div id="faces">
				<a id="happy"><img onclick="javascript:recordHappyClick();" src="img/contento.png" alt="alt text" /></a>
				<a id="happy"><img onclick="javascript:recordOkayClick();" src="img/bien.png" alt="alt text" /></a>
				<a id="happy"><img onclick="javascript:recordSadClick();" src="img/masomenos.png" alt="alt text" /></a>
				<a id="happy"><img onclick="javascript:recordAngryClick();" src="img/mal.png" alt="alt text " /></a>
			</div>

			<!-- <div id="status" name="status">Status Message</div> -->
		
			<!-- <div id="resultados">
				<h1>Resultados:</p>
				<a id="p1">0</a>
				<a id="p2">0</a>
				<a id="p3">0</a>
				<a id="p4">0</a>
				<p id="time"></p>
			</div> -->
	</section>

	<section class="gracias">
			<h1 class="ty">GRACIAS! Que tengas un buen dia!</h1>
	</section>

<script>
		
		var grade;
		
		function recordHappyClick() {
		 grade = 3;
		 recordGradeToTable();
		}
		
		function recordOkayClick() {
		 grade =2;
		 recordGradeToTable();
		  
		}
		    
		function recordSadClick() {
		 grade = 1;
		 recordGradeToTable();
		  
		}

		function recordAngryClick() {
		  grade = 0;
		  recordGradeToTable();
		  
		}

		function recordGradeToTable () {
		 
		 var db = openDatabase('new6', '1.0', 'Test DB', 2 * 1024 * 1024);
         // var msg;
           // CHANGE STORE ID "13 = lomas"
         var store = "13";
         var rating = grade;
         console.log(rating);
       	 var time_stamp = new Date();
			
         db.transaction(function (tx) {
         	// console.log(grade);
            tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, date_time varchar(200), log int, store_location varchar(50))'); 
            tx.executeSql('INSERT INTO LOGS (id, date_time, log, store_location) VALUES (1, ?, ?, ?)', [time_stamp, rating, store]);
            // msg = '<p>Log message created and row inserted.</p>';
            // document.querySelector('#status').innerHTML =  msg;
         });

         // db.transaction(function (tx) {
         //    tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
         //       var len = results.rows.length, i;
         //       msg = "<p>Found rows: " + len + "</p>";
         //       document.querySelector('#status').innerHTML +=  msg;
					
         //       for (i = 0; i < len; i++){
         //          msg = "<p><b>" + results.rows.item(i).id + " " + results.rows.item(i).date_time + " " + results.rows.item(i).log + "</b></p>" + results.rows.item(i).store_location;
         //          document.querySelector('#status').innerHTML +=  msg;
         //       }
         //    }, null);
         // });
        }


</script>
</body>
</html>